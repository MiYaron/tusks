import{Aa as V,B as m,Ba as G,Ca as C,Da as E,Ea as z,Fa as A,G as O,Ga as d,Ha as B,Ja as H,Ka as j,L as h,La as W,N as S,O as w,R as a,S as l,T as p,U as u,V as b,W as R,Y as c,ba as P,ea as I,ga as T,ia as f,ka as F,n as _,ra as U,u as M,va as g,xa as N,z as i}from"./chunk-2KWKJZAA.js";var o=[];for(let t=0;t<256;++t)o.push((t+256).toString(16).slice(1));function q(t,e=0){return(o[t[e+0]]+o[t[e+1]]+o[t[e+2]]+o[t[e+3]]+"-"+o[t[e+4]]+o[t[e+5]]+"-"+o[t[e+6]]+o[t[e+7]]+"-"+o[t[e+8]]+o[t[e+9]]+"-"+o[t[e+10]]+o[t[e+11]]+o[t[e+12]]+o[t[e+13]]+o[t[e+14]]+o[t[e+15]]).toLowerCase()}var k,X=new Uint8Array(16);function y(){if(!k){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");k=crypto.getRandomValues.bind(crypto)}return k(X)}var Z=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),x={randomUUID:Z};function J(t,e,n){if(x.randomUUID&&!e&&!t)return x.randomUUID();t=t||{};let r=t.random||(t.rng||y)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let s=0;s<16;++s)e[n+s]=r[s];return e}return q(r)}var D=J;var v=class t{router=i(f);detectorRef=i(P);ngOnInit(){this.detectorRef.detach()}goHome(){this.router.navigate([g.HOME])}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=m({type:t,selectors:[["app-return-button"]],standalone:!0,features:[c],decls:1,vars:0,consts:[[3,"click"]],template:function(n,r){n&1&&(a(0,"button",0),u("click",function(){return r.goHome()}),l())},styles:['button[_ngcontent-%COMP%]{position:absolute;top:1rem;left:1rem;background-color:var(--solid-grey);width:2rem;height:2rem;background-image:url("./media/return-GG5RRPOU.svg");background-size:1.2rem;background-repeat:no-repeat;background-position:center;box-shadow:var(--item-shadow);padding:0}button[_ngcontent-%COMP%]:hover{background-color:var(--solid-darkgrey)}'],changeDetection:0})};var L=class t{store=i(U);destroyRef=i(O);activatedRoute=i(T);router=i(f);action;task;error;ngOnInit(){this.initFields()}saveTask(e){e.preventDefault(),this.validationCheck()&&(this.store.dispatch(N[this.action]({task:this.task.value})),this.router.navigate([g.HOME]))}initFields(){this.error=S(""),this.activatedRoute.paramMap.pipe(F(this.destroyRef),M(e=>{let n=e.get("id")??"";return this.store.select(V(n)).pipe(_(1))})).subscribe(e=>{this.action=e?"edit":"add",this.task=this.generateForm(e)})}generateForm(e){return new A({id:new d(e?.id??D()),title:new d(e?.title??"",[C.required]),desc:new d(e?.desc??""),deadline:new d(e?.deadline??"",[C.required]),isDone:new d(e?.isDone??!1)})}validationCheck(){let e=this.task.get("title"),n=this.task.get("deadline");return e?.valid?n?.valid?(this.error.set(""),!0):(this.error.set("Task must have a valid date and time"),!1):(this.error.set("Task must have a title"),!1)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=m({type:t,selectors:[["app-details"]],standalone:!0,features:[c],decls:12,vars:2,consts:[["id","logo"],[3,"submit","formGroup"],["id","task-title","name","task-title","type","text","placeholder","Title","formControlName","title"],["id","task-desc","name","task-desc","type","text","placeholder","Description","formControlName","desc"],["for","task-deadline"],["id","task-deadline","name","task-deadline","type","datetime-local","formControlName","deadline"],["type","submit","value","Save Task"],[1,"error"]],template:function(n,r){n&1&&(a(0,"main"),p(1,"app-return-button")(2,"div",0),a(3,"form",1),u("submit",function(K){return r.saveTask(K)}),p(4,"input",2)(5,"textarea",3),a(6,"label",4),b(7,"Due Date:"),l(),p(8,"input",5)(9,"input",6),a(10,"p",7),b(11),l()()()),n&2&&(h(3),w("formGroup",r.task),h(8),R(r.error()))},dependencies:[I,W,B,G,E,z,H,j,v],styles:['main[_ngcontent-%COMP%]{background:var(--background-gradient-primary);padding:5vw}#logo[_ngcontent-%COMP%]{height:6vh;width:100%;background-image:url("./media/tusks_logo_white-KVSODZWB.png");background-size:contain;background-repeat:no-repeat;background-position:center}form[_ngcontent-%COMP%]{flex:1;width:100%;display:flex;flex-direction:column;background-color:#fff;padding:5%}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text-secondary)}form[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:none}form[_ngcontent-%COMP%]   #task-title[_ngcontent-%COMP%]{border-radius:0;border:none;border-bottom:1px solid var(--solid-grey);font-size:1.5rem;font-weight:700;padding:0}form[_ngcontent-%COMP%]   #task-title[_ngcontent-%COMP%]::placeholder{font-size:1.5rem}form[_ngcontent-%COMP%]   #task-desc[_ngcontent-%COMP%]{flex:1;resize:none;border-radius:0;border:none;font-size:1rem;width:100%}.error[_ngcontent-%COMP%]{color:var(--text-danger);font-size:.8rem;align-self:center}'],changeDetection:0})};export{L as DetailsComponent};
