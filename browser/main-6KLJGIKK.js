import{$ as Re,A as Se,B as u,Ba as We,C as Ce,D as Te,Da as Qe,E as ye,F as be,G as De,Ga as Ze,H as _e,I as R,Ia as Je,J as Me,K as Ie,L as p,La as Ye,M as Fe,O as m,P as ne,Q as oe,R as f,S as c,T as g,U as D,V as F,W as we,X as Oe,Y as h,Z as xe,_ as Pe,a,aa as Ae,b as l,c as Q,ca as A,d as pe,da as je,e as fe,ea as w,f as Z,fa as He,g as de,h as M,ha as Ne,i as J,ia as j,j as Y,ja as Le,k as x,ka as $e,l as P,la as Be,m as le,ma as H,n as ue,na as Xe,o as me,oa as Ge,p as ge,pa as Ue,q as he,qa as Ve,r as ve,ra as d,s as ee,sa as Ke,t as ke,ta as v,u as te,ua as N,v as Ee,va as S,w as T,wa as k,x as y,xa as E,y as I,ya as ze,z as r,za as qe}from"./chunk-2KWKJZAA.js";var ht={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},L="__@ngrx/effects_create__";function ie(e,n={}){let t=n.functional?e:e(),o=a(a({},ht),n);return Object.defineProperty(t,L,{value:o}),t}function vt(e){return Object.getOwnPropertyNames(e).filter(o=>e[o]&&e[o].hasOwnProperty(L)?e[o][L].hasOwnProperty("dispatch"):!1).map(o=>{let s=e[o][L];return a({propertyName:o},s)})}function kt(e){return vt(e)}function et(e){return Object.getPrototypeOf(e)}function Et(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function tt(e){return typeof e=="function"}function St(e){return e.filter(tt)}function Ct(e,n,t){let o=et(e),i=!!o&&o.constructor.name!=="Object"?o.constructor.name:null,_=kt(e).map(({propertyName:b,dispatch:ut,useEffectsErrorHandler:mt})=>{let ae=typeof e[b]=="function"?e[b]():e[b],ce=mt?t(ae,n):ae;return ut===!1?ce.pipe(me()):ce.pipe(ke()).pipe(M(gt=>({effect:e[b],notification:gt,propertyName:b,sourceName:i,sourceInstance:e})))});return Y(..._)}var Tt=10;function nt(e,n,t=Tt){return e.pipe(P(o=>(n&&n.handleError(o),t<=1?e:nt(e,n,t-1))))}var ot=(()=>{class e extends pe{constructor(t){super(),t&&(this.source=t)}lift(t){let o=new e;return o.source=this,o.operator=t,o}static{this.\u0275fac=function(o){return new(o||e)(I(Ve))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function re(...e){return x(n=>e.some(t=>typeof t=="string"?t===n.type:t.type===n.type))}var ln=new y("@ngrx/effects Internal Root Guard"),un=new y("@ngrx/effects User Provided Effects"),mn=new y("@ngrx/effects Internal Root Effects"),gn=new y("@ngrx/effects Internal Root Effects Instances"),hn=new y("@ngrx/effects Internal Feature Effects"),vn=new y("@ngrx/effects Internal Feature Effects Instance Groups"),yt=new y("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>nt}),bt="@ngrx/effects/init",Dt=H(bt);function _t(e,n){if(e.notification.kind==="N"){let t=e.notification.value;!Mt(t)&&n.handleError(new Error(`Effect ${It(e)} dispatched an invalid action: ${Ft(t)}`))}}function Mt(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function It({propertyName:e,sourceInstance:n,sourceName:t}){let o=typeof n[e]=="function";return!!t?`"${t}.${String(e)}${o?"()":""}"`:`"${String(e)}()"`}function Ft(e){try{return JSON.stringify(e)}catch{return e}}var wt="ngrxOnIdentifyEffects";function Ot(e){return se(e,wt)}var xt="ngrxOnRunEffects";function Pt(e){return se(e,xt)}var Rt="ngrxOnInitEffects";function At(e){return se(e,Rt)}function se(e,n){return e&&n in e&&typeof e[n]=="function"}var it=(()=>{class e extends fe{constructor(t,o){super(),this.errorHandler=t,this.effectsErrorHandler=o}addEffects(t){this.next(t)}toActions(){return this.pipe(ee(t=>Et(t)?et(t):t),J(t=>t.pipe(ee(jt))),J(t=>{let o=t.pipe(ve(i=>Ht(this.errorHandler,this.effectsErrorHandler)(i)),M(i=>(_t(i,this.errorHandler),i.notification)),x(i=>i.kind==="N"&&i.value!=null),ge()),s=t.pipe(ue(1),x(At),M(i=>i.ngrxOnInitEffects()));return Y(o,s)}))}static{this.\u0275fac=function(o){return new(o||e)(I(_e),I(yt))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function jt(e){return Ot(e)?e.ngrxOnIdentifyEffects():""}function Ht(e,n){return t=>{let o=Ct(t,e,n);return Pt(t)?t.ngrxOnRunEffects(o):o}}var Nt=(()=>{class e{get isStarted(){return!!this.effectsSubscription}constructor(t,o){this.effectSources=t,this.store=o,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(o){return new(o||e)(I(it),I(d))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function rt(...e){let n=e.flat(),t=St(n);return ye([t,{provide:Se,multi:!0,useValue:()=>{r(Ge),r(Ue,{optional:!0});let o=r(Nt),s=r(it),i=!o.isStarted;i&&o.start();for(let _ of n){let b=tt(_)?r(_):_;s.addEffects(b)}i&&r(d).dispatch(Dt())}}])}var $=class e{transform(n){if(!n||n.length===0)return[];let t=[...n];return t=t.sort((o,s)=>new Date(o.deadline).getTime()-new Date(s.deadline).getTime()),this.groupSortedTasks(t)}groupSortedTasks(n){let t=[],o="";return n.forEach(s=>{let i=new Date(s.deadline).toDateString();i===o?t[t.length-1].tasks.push(s):(t.push({date:i,tasks:[s]}),o=i)}),t}static \u0275fac=function(t){return new(t||e)};static \u0275pipe=Te({name:"groupTasks",type:e,pure:!0,standalone:!0})};var B=class e{el=r(Me);renderer=r(Fe);element;startX;isDragged;holdDuration;timeout;appDrag=R();ngOnInit(){this.initFields(),this.renderer.setStyle(this.element,"touch-action","pan-y")}onPointerDown(n){let t=n.clientX;this.startX=t,this.timeout=setTimeout(()=>{this.isDragged=!0},this.holdDuration)}onPointerMove(n){if(this.isDragged){let o=n.clientX-this.startX;this.renderer.removeStyle(this.element,"transition"),this.transform(`${o}px`)}}onPointerUp(n){clearTimeout(this.timeout),this.isDragged?this.handleDrag(n):this.handleClick()}initFields(){this.element=this.el.nativeElement,this.startX=0,this.isDragged=!1,this.holdDuration=150}transform(n){this.renderer.setStyle(this.element,"transform",`translateX(${n})`)}handleDrag(n){let o=n.clientX-this.startX;this.renderer.setStyle(this.element,"transition","transform 0.3s ease"),o>window.innerWidth*.4?(this.transform("100vw"),setTimeout(()=>this.appDrag()?.onDrag?.(),200)):this.transform("0"),this.isDragged=!1}handleClick(){this.appDrag()?.onClick?.()}static \u0275fac=function(t){return new(t||e)};static \u0275dir=Ce({type:e,selectors:[["","appDrag",""]],hostBindings:function(t,o){t&1&&D("pointerdown",function(i){return o.onPointerDown(i)})("pointermove",function(i){return o.onPointerMove(i)})("pointerup",function(i){return o.onPointerUp(i)})},inputs:{appDrag:[1,"appDrag"]},standalone:!0})};var X=class e{store=r(d);router=r(j);task=R.required();showDetails(){this.router.navigate([S.TASK,this.task().id])}markAsDone(n){this.stopPropagation(n),this.store.dispatch(E.mark({id:this.task().id}))}deleteTask(){this.store.dispatch(E.remove({id:this.task().id}))}stopPropagation(n){n.stopPropagation()}getElemActions(){return{onClick:()=>this.showDetails(),onDrag:()=>this.deleteTask()}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=u({type:e,selectors:[["app-task-item"]],inputs:{task:[1,"task"]},standalone:!0,features:[h],decls:4,vars:5,consts:[[3,"id","appDrag"],["type","checkbox",1,"checkbox",3,"change","pointerdown","pointerup","checked"],[1,"task-title",3,"ngClass"]],template:function(t,o){t&1&&(f(0,"li",0)(1,"input",1),D("change",function(i){return o.markAsDone(i)})("pointerdown",function(i){return o.stopPropagation(i)})("pointerup",function(i){return o.stopPropagation(i)}),c(),f(2,"p",2),F(3),c()()),t&2&&(m("id",o.task().id)("appDrag",o.getElemActions()),p(),m("checked",o.task().isDone),p(),m("ngClass",o.task().isDone?"done":""),p(),Oe(" ",o.task().title," "))},dependencies:[w,A,B],styles:['li[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--solid-white);padding:1.5rem 1rem;margin-bottom:.5rem;box-shadow:var(--item-shadow);cursor:grab}.checkbox[_ngcontent-%COMP%]{appearance:none;height:1.3rem;width:1.3rem;background-image:url("./media/task_mark_uncompleted-5VRPB7VN.svg");background-size:contain;background-repeat:no-repeat;background-position:center;border:0;padding:0;cursor:pointer}.checkbox[_ngcontent-%COMP%]:checked{background-image:url("./media/task_mark_completed-SWSX4KHX.svg")}.checkbox[_ngcontent-%COMP%]:focus{outline:0}.task-title[_ngcontent-%COMP%]{color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:pointer}.task-title.done[_ngcontent-%COMP%]{color:var(--text-disabled);text-decoration:line-through}'],changeDetection:0})};var $t=(e,n)=>n.date,Bt=(e,n)=>n.id;function Xt(e,n){if(e&1&&g(0,"app-task-item",2),e&2){let t=n.$implicit;m("task",t)}}function Gt(e,n){if(e&1&&(f(0,"div",1)(1,"h4"),F(2),c(),f(3,"ul"),ne(4,Xt,1,1,"app-task-item",2,Bt),c()()),e&2){let t=n.$implicit;p(2),we(t.date),p(2),oe(t.tasks)}}var U=class e{store=r(d);injector=r(be);tasks;ngOnInit(){this.initFields()}initFields(){this.store.dispatch(k.load()),this.tasks=Be(this.store.select(qe),{initialValue:[],injector:this.injector})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=u({type:e,selectors:[["app-tasks-list"]],standalone:!0,features:[h],decls:4,vars:2,consts:[["id","list"],[1,"task-group"],[3,"task"]],template:function(t,o){t&1&&(f(0,"div",0),ne(1,Gt,6,1,"div",1,$t),Pe(3,"groupTasks"),c()),t&2&&(p(),oe(Re(3,0,o.tasks())))},dependencies:[w,$,X],styles:["#list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;overflow-x:hidden}.task-group[_ngcontent-%COMP%]{border-radius:0;width:90%}h4[_ngcontent-%COMP%]{font-size:.7rem;margin:.3rem}"],changeDetection:0})};var O=H("[Search] Set Query",Xe());var V=class e{store=r(d);destroyRef=r(De);query;ngOnInit(){this.initFields()}initFields(){this.query=new Ze(""),this.store.dispatch(O({query:""})),this.query.valueChanges.pipe(le(500),he(),$e(this.destroyRef)).subscribe(n=>{this.store.dispatch(O({query:n||""}))})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=u({type:e,selectors:[["app-search-bar"]],standalone:!0,features:[h],decls:2,vars:1,consts:[["id","search-box","name","search","placeholder","Search...",3,"formControl"]],template:function(t,o){t&1&&(f(0,"div"),g(1,"input",0),c()),t&2&&(p(),m("formControl",o.query))},dependencies:[Ye,We,Qe,Je],styles:['input[_ngcontent-%COMP%]{background-image:url("./media/search-AZUI772U.svg");background-size:1rem;background-repeat:no-repeat;background-position:right;background-origin:content-box}'],changeDetection:0})};var Ut=e=>({"height.rem":e}),st=768,at=5,ct=4,Vt=20,K=class e{router=r(j);logoHeight;ngOnInit(){this.initFields()}onWindowScroll(){if(window.innerWidth<st){let n=window.scrollY||document.documentElement.scrollTop;this.logoHeight=Math.max(at-n/Vt,0)}else this.logoHeight=ct}addTask(){this.router.navigate([S.TASK])}initFields(){this.logoHeight=window.innerWidth<st?at:ct}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=u({type:e,selectors:[["app-home"]],hostBindings:function(t,o){t&1&&D("scroll",function(){return o.onWindowScroll()},!1,Ie)},standalone:!0,features:[h],decls:8,vars:4,consts:[["id","header"],["id","logo",3,"ngStyle","ngClass"],["id","items"],["id","add",3,"click"]],template:function(t,o){t&1&&(f(0,"main")(1,"div",0),g(2,"div",1),f(3,"div",2)(4,"button",3),D("click",function(){return o.addTask()}),F(5,"New Task"),c(),g(6,"app-search-bar"),c()(),g(7,"app-tasks-list"),c()),t&2&&(p(2),m("ngStyle",xe(2,Ut,o.logoHeight))("ngClass",o.logoHeight<1?"hidden":""))},dependencies:[w,A,je,U,V],styles:['main[_ngcontent-%COMP%]{background:var(--background-gradient-light)}#header[_ngcontent-%COMP%]{position:sticky;top:0;display:flex;flex-direction:column;background:var(--background-gradient-fade);width:100%;min-height:13rem;padding:1rem 7vw;z-index:2}#logo[_ngcontent-%COMP%]{background-image:url("./media/tusks_logo-UX5EVQ3O.png");background-size:contain;background-repeat:no-repeat;background-position:center;transition:height .3s ease-out}#logo.hidden[_ngcontent-%COMP%]{display:none}#items[_ngcontent-%COMP%]{display:flex;flex-direction:column}#add[_ngcontent-%COMP%]{width:100%}app-tasks-list[_ngcontent-%COMP%]{width:100%}@media (min-width: 768px){#header[_ngcontent-%COMP%]{background-color:var(--solid-white);flex-direction:row;justify-content:space-between;align-items:center;min-height:fit-content}#logo[_ngcontent-%COMP%]{flex:1;background-position:left}#items[_ngcontent-%COMP%]{flex-direction:row;justify-content:flex-end}#add[_ngcontent-%COMP%]{width:fit-content}}'],changeDetection:0})};var pt=[{path:S.HOME,component:K},{path:S.TASK,loadComponent:()=>import("./chunk-HAAPAFOZ.js").then(e=>e.DetailsComponent)},{path:`${S.TASK}/:id`,loadComponent:()=>import("./chunk-HAAPAFOZ.js").then(e=>e.DetailsComponent)},{path:"",redirectTo:S.HOME,pathMatch:"full"}];var Kt={tasksList:[],error:null,status:"pending"},ft=N(Kt,v(E.add,(e,{task:n})=>l(a({},e),{tasksList:[...e.tasksList,n]})),v(E.edit,(e,{task:n})=>l(a({},e),{tasksList:e.tasksList.map(t=>t.id!==n.id?t:n)})),v(E.mark,(e,{id:n})=>l(a({},e),{tasksList:e.tasksList.map(t=>t.id===n?l(a({},t),{isDone:!t.isDone}):t)})),v(E.remove,(e,{id:n})=>l(a({},e),{tasksList:e.tasksList.filter(t=>t.id!==n)})),v(k.load,e=>l(a({},e),{status:"loading"})),v(k.onSuccess,(e,{tasks:n})=>l(a({},e),{tasksList:n,error:null,status:"success"})),v(k.onFailure,(e,{error:n})=>l(a({},e),{error:n,status:"error"})));var zt="",dt=N(zt,v(O,(e,{query:n})=>n));var z=class e{getTasks(){return Q(this,null,function*(){let n=localStorage.getItem("tasks");return n?yield JSON.parse(n):[]})}setTasks(n){return Q(this,null,function*(){localStorage.setItem("tasks",JSON.stringify(n))})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})};var q=class e{store=r(d);actions$=r(ot);taskService=r(z);loadTasks$=ie(()=>this.actions$.pipe(re(k.load),te(()=>Z(this.taskService.getTasks()).pipe(M(n=>k.onSuccess({tasks:n})),P(n=>de(k.onFailure({error:n})))))));saveTasks$=ie(()=>this.actions$.pipe(re(...Object.values(E)),Ee(this.store.select(ze)),te(([n,t])=>Z(this.taskService.setTasks(t.tasksList)))),{dispatch:!1});static \u0275fac=function(t){return new(t||e)};static \u0275prov=T({token:e,factory:e.\u0275fac})};var lt={providers:[Ae({eventCoalescing:!0}),Le(pt),Ke({tasks:ft,query:dt}),rt([q])]};var W=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=u({type:e,selectors:[["app-root"]],standalone:!0,features:[h],decls:1,vars:0,template:function(t,o){t&1&&g(0,"router-outlet")},dependencies:[Ne],changeDetection:0})};He(W,lt).catch(e=>console.error(e));
